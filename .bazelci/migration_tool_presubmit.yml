matrix:
  platform: ["macos_arm64", "ubuntu2004", "windows"]

tasks:
  go_extension:
    name: go
    platform: ${{ platform }}
    shell_commands:
      - cd tools/bzlmod_migration_test_examples/go_extension && python3.11 migration_test.py
    batch_commands:
      - cd tools\bzlmod_migration_test_examples\go_extension && python -3.11 migration_test.py
  maven_extension:
    name: maven
    platform: ${{ platform }}
    shell_commands:
      - cd tools/bzlmod_migration_test_examples/maven_extensions && python3.11 ../migration_test.py
    batch_commands:
      - cd tools\bzlmod_migration_test_examples\maven_extensions && python -3.11 ../migration_test.py
  python_extension:
    name: python
    platform: ${{ platform }}
    shell_commands:
      - cd tools/bzlmod_migration_test_examples/py_extension && python3.11 ../migration_test.py
    batch_commands:
      - cd tools\bzlmod_migration_test_examples\py_extension && python -3.11 ../migration_test.py
  simple_deps_extension:
    name: simple_deps
    platform: ${{ platform }}
    shell_commands:
      - cd tools/bzlmod_migration_test_examples/simple_module_deps && python3.11 migration_test.py
    batch_commands:
      - cd tools\bzlmod_migration_test_examples\simple_module_deps && python -3.11 migration_test.py

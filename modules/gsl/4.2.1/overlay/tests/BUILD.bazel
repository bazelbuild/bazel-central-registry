load("@rules_cc//cc:defs.bzl", "cc_test")

cc_test(
    name = "tests",
    srcs = glob(["*.cpp", "*.h"], exclude = ["span_compatibility_tests.cpp", "no_exception_ensure_tests.cpp"]),
    copts = [
        "-Wall",
        "-Wextra",
        "-Wfloat-equal",
        "-Wno-deprecated-declarations",  # Allow tests for [[deprecated]] elements
        "-Wno-missing-braces",
        "-Wno-switch-default",
    ],
    deps = ["//:gsl", "@googletest//:gtest_main"],
)

cc_test(
    name = "no_exception_ensure_tests",
    srcs = ["no_exception_ensure_tests.cpp"],
    copts = [
        "-Wall",
        "-Wextra",
    ],
    deps = ["//:gsl"],
)

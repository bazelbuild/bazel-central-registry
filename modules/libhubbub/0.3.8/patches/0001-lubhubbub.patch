From eba0d3683723d6f1f8624ab53d06f5e4b340766e Mon Sep 17 00:00:00 2001
From: Dmitry Mikhin <dmikhin@webmonitorx.ru>
Date: Tue, 23 Jul 2024 19:33:05 +0300
Subject: [PATCH] lubhubbub

---
 build/make-entities.pl         | 10 +++++-----
 src/treebuilder/element-type.c |  2 +-
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git build/make-entities.pl build/make-entities.pl
index 7492052..4ec46bc 100644
--- build/make-entities.pl
+++ build/make-entities.pl
@@ -7,10 +7,10 @@
 
 use strict;
 
-use constant ENTITIES_FILE => 'build/Entities';
-use constant ENTITIES_INC  => 'src/tokeniser/entities.inc';
+my $ENTITIES_FILE = $ARGV[0];
+my $ENTITIES_INC  = $ARGV[1];
 
-open(INFILE, "<", ENTITIES_FILE) || die "Unable to open " . ENTITIES_FILE;
+open(INFILE, "<", $ENTITIES_FILE) || die "Unable to open " . $ENTITIES_FILE;
 
 my %entities;
 
@@ -124,7 +124,7 @@ $output .= "static int32_t dict_root = " . $trie->{heapindex} . ";\n";
 
 # Write file out
 
-if (open(EXISTING, "<", ENTITIES_INC)) {
+if (open(EXISTING, "<", $ENTITIES_INC)) {
    local $/ = undef();
    my $now = <EXISTING>;
    undef($output) if ($output eq $now);
@@ -132,7 +132,7 @@ if (open(EXISTING, "<", ENTITIES_INC)) {
 }
 
 if (defined($output)) {
-   open(OUTF, ">", ENTITIES_INC);
+   open(OUTF, ">", $ENTITIES_INC);
    print OUTF $output;
    close(OUTF);
 }
diff --git src/treebuilder/element-type.c src/treebuilder/element-type.c
index 7e2772c..ef51e7f 100644
--- src/treebuilder/element-type.c
+++ src/treebuilder/element-type.c
@@ -8,7 +8,7 @@
 #include "treebuilder/element-type.h"
 
 /* Auto-generated by `gperf`. */
-#include "treebuilder/autogenerated-element-type.c"
+#include "treebuilder/autogenerated-element-type.inc"
 
 /* Exported function, documented in element-type.h */
 element_type element_type_from_name(
-- 
2.45.2


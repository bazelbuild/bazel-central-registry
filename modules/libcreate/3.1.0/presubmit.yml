matrix:
  platform:
  - debian10
  - ubuntu2004
  - macos
  - macos_arm64
  - windows
  bazel:
  - 7.x
  - 6.x
tasks:
  build_and_test:
    name: Build library and run test targets
    platform: ${{ platform }}
    bazel: ${{ bazel }}
    build_targets:
    - '@libcreate'
    - '@libcreate//:battery_level'
    - '@libcreate//:bumpers'
    - '@libcreate//:cliffs'
    - '@libcreate//:drive_circle'
    - '@libcreate//:leds'
    - '@libcreate//:packets'
    - '@libcreate//:play_song'
    - '@libcreate//:wheeldrop'
    test_targets:
    - "@libcreate//:create_test"
    - "@libcreate//:data_test"
    - "@libcreate//:packet_test"
    - "@libcreate//:robot_model_test"
    - "@libcreate//:serial_query_test"
    - "@libcreate//:serial_stream_test"

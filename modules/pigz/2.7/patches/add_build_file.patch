--- /dev/null	2023-06-26 14:18:54
+++ BUILD.bazel	2023-06-26 14:18:51
@@ -0,0 +1,38 @@
+_COPTS = select({
+        "@platforms//os:windows": [
+            "-DNOTHREAD",
+        ],
+        "//conditions:default": [
+            "-O3", "-Wall", "-Wextra", "-Wno-unknown-pragmas", "-Wcast-qual"
+        ],
+})
+
+cc_library(
+    name = "try",
+    srcs = ["try.c"],
+    hdrs = ["try.h"],
+    copts = _COPTS,
+)
+
+cc_library(
+    name = "yarn",
+    srcs = ["yarn.c"],
+    hdrs = ["yarn.h"],
+    copts = _COPTS,
+)
+
+cc_library(
+    name = "pigz",
+    srcs = ["pigz.c"],
+    deps = [":try", ":yarn", "@zopfli", "@zlib"],
+    copts = _COPTS,
+)
+
+cc_binary(
+    name = "bin",
+    deps = [":pigz"],
+    linkopts = ["-lm"] + select({
+        "@platforms//os:windows": [],
+        "//conditions:default": ["-lpthread"],
+    }),
+)

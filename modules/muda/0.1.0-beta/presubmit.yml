matrix:
  platform:
  - ubuntu2204
  - windows
  bazel: [8.x]

tasks:
  verify_build:
    name: Verify module targets build
    platform: ${{ platform }}
    bazel: ${{ bazel }}
    build_targets:
    - '@muda//:muda'

  run_all_tests:
    name: Run unit and system tests
    platform: ${{ platform }}
    bazel: ${{ bazel }}
    test_targets:
    - '@muda//test:muda_unit_test'
    - '@muda//test:muda_eigen_test'
    - '@muda//test:muda_linear_sysytem_test'
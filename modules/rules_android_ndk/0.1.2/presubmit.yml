bcr_test_module:
  module_path: examples/basic
  matrix:
    platform: ["macos", "ubuntu2004"]
    bazel: ["7.2.1", "rolling"]
  tasks:
    run_test_module:
      name: "Verify build targets with bzlmod"
      platform: ${{ platform }}
      bazel: ${{ bazel }}
      environment:
        ANDROID_NDK_HOME: /opt/android-ndk-r25b
      build_flags:
        - "--android_platforms=//:arm64-v8a"
      build_targets:
        - "//java/com/app:app"

bcr_test_module:
  module_path: examples/basic
  matrix:
    bazel: ["7.2.1", "rolling"]
  tasks:
    run_test_module:
      name: "Verify build targets with bzlmod on MacOS"
      platform: "macos"
      bazel: ${{ bazel }}
      environment:
        ANDROID_NDK_HOME: "/Users/buildkite/android-ndk-r25b"
      build_flags:
        - "--android_platforms=//:arm64-v8a"
      build_targets:
        - "//java/com/app:app"


bcr_test_module:
  module_path: examples/basic
  matrix:
    bazel: ["7.2.1", "rolling"]
  tasks:
    run_test_module:
      name: "Verify build targets with bzlmod on Windows"
      platform: "windows"
      bazel: ${{ bazel }}
      environment:
        ANDROID_NDK_HOME: "c:/android_ndk/r25b"
      build_flags:
        - "--android_platforms=//:arm64-v8a"
      build_targets:
        - "//java/com/app:app"


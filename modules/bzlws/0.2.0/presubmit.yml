matrix:
  platform: [ubuntu2004, macos, macos_arm64, windows]
  bazel: [7.x]
tasks:
  verify_targets:
    name: Verify build targets
    platform: ${{ platform }}
    bazel: ${{ bazel }}
    build_targets: ['@bzlws//...']

bcr_test_module:
  module_path: test
  matrix:
    platform: [ubuntu2004, macos, macos_arm64, windows]
    bazel: [7.x]
  tasks:
    run_test_module:
      name: Build test module
      platform: ${{ platform }}
      bazel: ${{ bazel }}
      build_targets: ['//...']
      # https://github.com/zaucy/bzlws/issues/16
      # test_targets: ['//...']

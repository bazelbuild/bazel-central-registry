cc_library(
    name="static_tests_headers",
    hdrs=[
        "static_tests/static_tests_storage_traits.h",
        "static_tests/static_tests_common.h"
    ],
    deps = ["@sqlite_orm//:sqlite_orm"],
)

cc_library(
    name="prepared_common",
    hdrs = ["prepared_statement_tests/prepared_common.h"],
    deps = ["@sqlite_orm//:sqlite_orm"],
)

cc_library(
    name="catch_matchers",
    hdrs = ["catch_matchers.h"],
    deps = ["@catch2//:catch2"],
)

cc_test(
    name = "unit_tests",
    srcs = glob(
        ["**/*.cpp"], 
        exclude=["schema/virtual_table.cpp"]
    ),
    deps = [
        ":static_tests_headers",
        ":prepared_common",
        ":catch_matchers",
        "@sqlite_orm//:sqlite_orm",
        "@catch2//:catch2_main",
    ],
)

load("@rules_cc//cc:cc_test.bzl", "cc_test")

DATA = glob([
    "**/*.html",
    "**/*.xml",
])

[
    cc_test(
        name = test.removeprefix("test") + "_test",
        srcs = [test + ".c"],
        data = DATA,
        deps = ["//:libxml2"],
    )
    for test in [
        "testapi",
        "testchar",
        "testdict",
        "testlimits",
        # TODO(zbarsky): Figure out why these two fail in BCR CI but work locally...
        # "testparser",
        # "testrecurse",
    ]
]

bcr_test_module:
  module_path: ""
  matrix:
    bazel: [ 7.x, 8.x ]
  incompatible_flags:
    # This check is disabled on bazel 8.x.
    "--incompatible_autoload_externally=":
      - 7.x
      - 8.x
  tasks:
    web_testing_python_ubuntu2004:
      name: "rules_web_testing_python in ubuntu"
      platform: ubuntu2004
      bazel: ${{ bazel }}
      shell_commands:
      - "sh ./.bazelci/setup_ubuntu.sh"
      test_flags:
      - "--test_tag_filters=-noci,-sauce"
      - "--incompatible_autoload_externally="
      build_targets: [ "//..." ]
      test_targets: [ "//..." ]
    web_testing_python_windows:
      name: "rules_web_testing_python in windows"
      platform: windows
      bazel: ${{ bazel }}
      test_flags:
      - "--test_tag_filters=-noci,-sauce"
      - "--incompatible_autoload_externally="
      build_targets: [ "//..." ]
      test_targets: [ "//..." ]

--- parse.c
+++ parse.c
@@ -1111,7 +1111,7 @@ parse_package_file (const char *key, const char *path,
 
   if (path)
     {
-      pkg->pcfiledir = g_dirname (path);
+      pkg->pcfiledir = g_path_get_dirname (path);
     }
   else
     {


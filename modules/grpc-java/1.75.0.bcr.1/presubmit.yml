matrix:
  platform: ["debian10", "macos_arm64", "ubuntu2204", "windows"]
  platform_non_windows: ["debian10", "macos_arm64", "ubuntu2204"]
  bazel: ["8.x", "9.*"]
tasks:
  verify_targets:
    platform: ${{ platform }}
    bazel: ${{ bazel }}
    build_targets:
    - '@grpc-java//:java_grpc_library__external_repo_test'
  verify_targets_bazel_7:
    platform: ${{ platform_non_windows }}
    bazel: "7.x"
    build_flags:
    - '--cxxopt=-std=c++17'
    - '--host_cxxopt=-std=c++17'
    build_targets:
    - '@grpc-java//:java_grpc_library__external_repo_test'
